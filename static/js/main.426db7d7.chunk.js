(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{10:function(t,e,n){"use strict";function o(t){this.$root=t,this.VOID=[i([])],this.NULL=[],this.GARBAGE=[],this.$check=function(){for(var t in this)if("$root"!==t&&"$check"!==t)try{d(this[t])}catch(e){m("When checking grammar rule '"+t+"'",e)}}}function r(t){return new c(t)}function a(t){return new u(t)}function i(t){return new l(t)}function s(t,e,n){return new p(t,e,n)}function c(t){this.content=t,this._string="$"+t,this.toString=function(){return this._string}}function u(t){this.content=t,this._string="{"+t+"}",this.toString=function(){return this._string}}function l(t){this.content=t,this._string="("+t.join("|")+")",this.toString=function(){return this._string}}function p(t,e,n){this.min=t,this.max=e,this.content=n,this._string=this.content+"<"+this.min+"-"+(this.max==1/0?"":this.max)+">",this.toString=function(){return this._string}}function m(t,e){throw void 0==e?TypeError(t):TypeError(t+"; "+e.message)}function d(t){try{for(var e in t.constructor!==Array&&m("Expected Array, found "+t.constructor.name),t)t[e].constructor==Array?d(t[e]):t[e].constructor!=String&&t[e].checkExpansion()}catch(n){m("When checking sequence expansion",n)}}n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"h",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"i",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"g",(function(){return p})),c.prototype.checkExpansion=function(){this.content.constructor!==String&&m("When checking Ref content; Expected String, found "+this.content.constructor.name)},u.prototype.checkExpansion=function(){this.content.constructor!==String&&m("When checking Tag content; Expected String, found "+this.content.constructor.name)},l.prototype.checkExpansion=function(){try{for(var t in this.content.constructor!==Array&&m("Expected Array, found "+this.content.constructor.name),this.content)d(this.content[t])}catch(e){m("When checking OneOf content",e)}},p.prototype.checkExpansion=function(){try{this.min.constructor===Number&&this.max.constructor===Number||m("Expected min/max to be Number, found "+this.min.constructor.name+"/"+this.max.constructor.name),0<=this.min&&this.min<=this.max||m("Expected 0 <= min <= max, found "+this.min+"/"+this.max),d(this.content)}catch(t){m("When checking Repeat content",t)}}},20:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parse}));var _srgs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);function LOG(t){}function clone(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var n in t)e[n]=clone(t[n]);return e}function isEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Chart(t){this.numberOfWords=t,this.passives=new Array(t),this.actives=new Array(t);for(var e=0;e<=t;e++)this.passives[e]={},this.actives[e]={};this.add=function(t){var e,n;return t.isPassive?(e=this.passives[t.start],n=t.lhs):(e=this.actives[t.end],n=t.next.content),n in e||(e[n]={}),!(t in e[n])&&(e[n][t]=t,!0)},this.resultsForRule=function(e,n,o){n=n||0,o=o||t;var r=[],a=this.passives[n][e];for(var i in a)a[i].end==o&&r.push(a[i].out);return r},this.allEdges=function(){return this.allPassiveEdges().concat(this.allActiveEdges())},this.allPassiveEdges=function(){var t=[];for(var e in this.passives)for(var n in this.passives[e])for(var o in this.passives[e][n])t.push(this.passives[e][n][o]);return t},this.allActiveEdges=function(){var t=[];for(var e in this.actives)for(var n in this.actives[e])for(var o in this.actives[e][n])t.push(this.actives[e][n][o]);return t},this.statistics=function(){var t=this.allPassiveEdges().length,e=this.allActiveEdges().length;return{nrEdges:t+e,nrPassiveEdges:t,nrActiveEdges:e}}}function PassiveEdge(t,e,n,o){this.start=t,this.end=e,this.lhs=n,this.out=o,this.isPassive=!0;var r="["+t+"-"+e+"] $"+n+" := "+o;this._string=r,this.toString=function(){return this._string}}function ActiveEdge(t,e,n,o,r,a,i,s){this.start=t,this.end=e,this.lhs=n,this.next=o,this.rest=r,this.out=a,this.rules=i,this.text=s,this.isPassive=!1;var c="<"+t+"-"+e+"> $"+n+" -> "+o+", "+r+" := "+a+" <- "+i;this._string=c,this.toString=function(){return this._string}}function parse(words,grammar,root,filter){root||(root=grammar.$root);var chart=new Chart(words.length),agenda=[],leftCornerFilter;function addToChart(inference,start,end,lhs,rhs,out,rules,text){var edge;if(rhs.length>0){var next=rhs[0],rest=rhs.slice(1);switch(next.constructor){case Array:return void addToChart(inference+",SEQUENCE",start,end,lhs,next.concat(rest),out,rules,text);case _srgs__WEBPACK_IMPORTED_MODULE_0__.g:var min=next.min,max=next.max;if(min<=0&&addToChart(inference+",SKIP",start,end,lhs,rest,out,rules,text),max>0){var content=next.content,rhs=1==max?[content]:[content,_srgs__WEBPACK_IMPORTED_MODULE_0__.f(min?min-1:min,max-1,content)];addToChart(inference+",REPEAT",start,end,lhs,rhs.concat(rest),out,rules,text)}return;case _srgs__WEBPACK_IMPORTED_MODULE_0__.c:var oneof=next.content;for(var i in oneof){var rhs=oneof[i].concat(rest);addToChart(inference+",ONEOF",start,end,lhs,rhs,out,rules,text)}return;case _srgs__WEBPACK_IMPORTED_MODULE_0__.i:return out=clone(out),rules=clone(rules),eval(next.content),void addToChart(inference+",TAG",start,end,lhs,rest,out,rules,text)}edge=new ActiveEdge(start,end,lhs,next,rest,out,rules,text)}else edge=new PassiveEdge(start,end,lhs,out);chart.add(edge)&&(LOG("+ "+inference+": "+edge),agenda.push(edge))}for(leftCornerFilter=void 0==filter?function(){return!0}:function(t,e){var n=filter[t];return!n||words[e]in n},addToChart("INIT",0,0,root,grammar[root],{},{},{});agenda.length>0;){var edge=agenda.pop(),start=edge.start,end=edge.end,lhs=edge.lhs,next=edge.next;if(LOG(edge),edge.isPassive){var actives=chart.actives[start][lhs];for(var i in actives){var active=actives[i],rules=clone(active.rules),text=active.text;text[edge.lhs]=words.slice(start,end).join(" "),"object"==typeof edge.out&&isEmpty(edge.out)?rules[edge.lhs]=text[edge.lhs]:rules[edge.lhs]=clone(edge.out),addToChart("COMBINE",active.start,end,active.lhs,active.rest,active.out,rules,text)}}else if(next.constructor==_srgs__WEBPACK_IMPORTED_MODULE_0__.e){var ref=next.content,passives=chart.passives[end][ref];for(var i in passives){var passive=passives[i],rules=clone(edge.rules),text=edge.text;rules[passive.lhs]=clone(passive.out),text[passive.lhs]=passive.text,addToChart("COMBINE",start,passive.end,lhs,edge.rest,edge.out,rules,text)}ref in grammar&&leftCornerFilter(ref,end)&&addToChart("PREDICT",end,end,ref,grammar[ref],{},{},{})}else next==words[end]&&addToChart("SCAN",start,end+1,lhs,edge.rest,edge.out,edge.rules,edge.text)}return chart}},31:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var o=n(28),r=n(5),a=(n(31),n(8),n(25)),i=n(22),s=n(2),c=n(45),u=n(46),l=n(11);const p={John:{person:"John Appleseed"},Mary:{person:"Mary Shelly"},Jane:{person:"Jane Austen"},Albert:{person:"Albert Einstein"},Coco:{person:"Coco Chanel"},Rebecca:{person:"Rebecka Black"},Vlad:{person:"Vlad Maraev"},"on Monday":{day:"Monday"},"on Tuesday":{day:"Tuesday"},"on Wednesday":{day:"Wednesday"},"on Thursday":{day:"Thursday"},"on Friday":{day:"Friday"},"on Saturday":{day:"Saturday"},"on Sunday":{day:"Sunday"},Monday:{day:"Monday"},Tuesday:{day:"Tuesday"},Wednesday:{day:"Wednesday"},Thursday:{day:"Thursday"},Friday:{day:"Friday"},Saturday:{day:"Saturday"},Sunday:{day:"Sunday"},8:{time:"8:00"},9:{time:"9:00"},10:{time:"10:00"},11:{time:"11:00"},12:{time:"12:00"},1:{time:"1:00"},2:{time:"2:00"},3:{time:"3:00"},4:{time:"4:00"},5:{time:"5:00"},"at 8 p.m.":{time:"8:00"},"at 9 p.m.":{time:"9:00"},"at 10 p.m.":{time:"10:00"},"at 11 p.m.":{time:"11:00"},"at 12 p.m.":{time:"12:00"},"at 1 p.m.":{time:"1:00"},"at 2 p.m.":{time:"2:00"},"at 3 p.m.":{time:"3:00"},"at 4 p.m.":{time:"4:00"},"at 5 p.m.":{time:"5:00"},"at 8":{time:"8:00"},"at 9":{time:"9:00"},"at 10":{time:"10:00"},"at 11":{time:"11:00"},"at 12":{time:"12:00"},"at 1":{time:"1:00"},"at 2":{time:"2:00"},"at 3":{time:"3:00"},"at 4":{time:"4:00"},"at 5":{time:"5:00"}},m={yes:!0,"you bet":!0,yeah:!0,no:!1,"no way":!1,nope:!1},d=l.a.cancel;function h(t){return Object(s.q)((e=>({type:"SPEAK",value:t})))}const g=Object(s.q)("TIMER",{delay:3e3,id:"repromptTimer"}),f=d("repromptTimer"),y=Object(s.b)({repromptCount:t=>0});function E(t,e){return{initial:"prompt",states:{prompt:{entry:t,on:{ENDSPEECH:"ask"},exit:g},ask:{entry:Object(s.q)("LISTEN"),exit:f},repromptCounter:{entry:[Object(s.q)("STOP_LISTEN"),Object(s.b)({repromptCount:t=>t.repromptCount+1}),h("Hey, are you awake?")],on:{ENDSPEECH:[{cond:t=>t.repromptCount>3,target:"#giveup"},{target:"reprompt"}]}},reprompt:{entry:e,on:{ENDSPEECH:"ask"},exit:g},nomatch:{entry:h("Sorry, could you repeat that?"),on:{ENDSPEECH:"reprompt"}}}}}function v(t,e){return t in(p[e.recResult]||{})}function b(t){return t.wholeDay?"Do you want me to create an appointment with ".concat(t.person," on ").concat(t.day," for the whole day?"):"Do you want me to create an appointment with ".concat(t.person," on ").concat(t.day," at ").concat(t.time,"?")}function O(t){return t.wholeDay?"".concat(t.person,". ").concat(t.day,". Whole day. Create appointment?"):"".concat(t.person,". ").concat(t.day,". ").concat(t.time,". Create appointment?")}const _=Object(s.q)((t=>({type:"SPEAK",value:b(t)}))),S=Object(s.q)((t=>({type:"SPEAK",value:O(t)}))),A={id:"appointment",initial:"promptflow",entry:y,states:{promptflow:{id:"promptflow",initial:"init",states:{init:{initial:"welcome",on:{ENDSPEECH:"who"},states:{welcome:{entry:h("Let's create an appointment")}}},who:{initial:"promptAndAsk",states:{promptAndAsk:Object(r.a)({},E(h("Whom are you meeting?"),h("You are meeting whom?"))),confirmation:{entry:[Object(s.q)((t=>({type:"SPEAK",value:"OK. ".concat(t.person)}))),y],on:{ENDSPEECH:"#promptflow.day"}}},on:{RECOGNISED:[{cond:t=>"help"===t.recResult,target:"#common.help"},{cond:t=>v("person",t),actions:[Object(s.b)((t=>({person:p[t.recResult].person})))],target:".confirmation"},{target:".promptAndAsk.nomatch"}],TIMER:".promptAndAsk.repromptCounter"}},day:{initial:"promptAndAsk",states:{promptAndAsk:Object(r.a)({},E(h("On which day is your meeting?"),h("Which day?"))),confirmation:{entry:[Object(s.q)((t=>({type:"SPEAK",value:"OK. ".concat(t.day)}))),y],on:{ENDSPEECH:"#promptflow.whole_day"}}},on:{RECOGNISED:[{cond:t=>"help"===t.recResult,target:"#common.help"},{cond:t=>v("day",t),actions:Object(s.b)((t=>({day:p[t.recResult].day}))),target:".confirmation"},{target:".promptAndAsk.nomatch"}],TIMER:".promptAndAsk.repromptCounter"}},whole_day:{initial:"promptAndAsk",states:{promptAndAsk:Object(r.a)({},E(h("Will it take the whole day?"),h("Whole day?"))),confirmation:{entry:[Object(s.q)((t=>({type:"SPEAK",value:"OK. ".concat(t.wholeDay)}))),y],on:{ENDSPEECH:[{cond:t=>t.wholeDay,target:"#promptflow.create_appointment"},{target:"#promptflow.time"}]}}},on:{RECOGNISED:[{cond:t=>"help"===t.recResult,target:"#common.help"},{cond:t=>t.recResult in m,actions:[Object(s.b)((t=>({wholeDay:m[t.recResult]})))],target:".confirmation"},{target:".promptAndAsk.nomatch"}],TIMER:".promptAndAsk.repromptCounter"}},time:{initial:"promptAndAsk",states:{promptAndAsk:Object(r.a)({},E(h("At what time is your meeting?"),h("What time?"))),confirmation:{entry:[Object(s.q)((t=>({type:"SPEAK",value:"OK. ".concat(t.time)}))),y],on:{ENDSPEECH:"#promptflow.create_appointment"}}},on:{RECOGNISED:[{cond:t=>"help"===t.recResult,target:"#common.help"},{cond:t=>"time"in(p[t.recResult]||{}),actions:Object(s.b)((t=>({time:p[t.recResult].time}))),target:".confirmation"},{target:".promptAndAsk.nomatch"}],TIMER:".promptAndAsk.repromptCounter"}},create_appointment:{initial:"promptAndAsk",states:{promptAndAsk:Object(r.a)({},E(_,S))},on:{RECOGNISED:[{cond:t=>"help"===t.recResult,target:"#common.help"},{cond:t=>!0===m[t.recResult],target:"#appointment_created"},{cond:t=>!1===m[t.recResult],target:"who"},{target:".promptAndAsk.nomatch"}],TIMER:".promptAndAsk.repromptCounter"}},hist:{type:"history",history:"shallow"}}},common:{id:"common",states:{help:{entry:h("This is a help message"),on:{ENDSPEECH:"#promptflow.hist"}}}},giveup:{id:"giveup",entry:h("Bye bye!"),type:"final"},appointment_created:{id:"appointment_created",entry:h("Your appointment has been created!"),type:"final"}}};var j=n(10);function C(t){for(var e=function(t){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(t,"application/xml");if("undefined"!=typeof ActiveXObject){var e=XML.newDocument();return e.loadXML(t),e}var n="data:text/xml;charset=utf-8,"+encodeURIComponent(t),o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseXML}(t),n=e.getElementsByTagName("grammar")[0].getAttribute("root"),o=new j.a(n),r=e.getElementsByTagName("rule"),a=0;a<r.length;a++){var i=r[a];o[i.getAttribute("id")]=w(i)}return o}function w(t){for(var e=t.childNodes,n=[],o=0;o<e.length;o++)if(3==e[o].nodeType){var r=e[o].textContent.trim();""!=r&&n.push(r.split(/ +/))}else if(1==e[o].nodeType)if("token"==e[o].nodeName)n.push(j.h(e[o].textContent));else if("ruleref"==e[o].nodeName){var a=e[o].getAttribute("uri");n.push(j.d(a.slice(1)))}else if("tag"==e[o].nodeName)n.push(j.h(e[o].textContent.trim()));else if("one-of"==e[o].nodeName)n.push(j.b(w(e[o])));else if("item"==e[o].nodeName){var i=e[o].getAttribute("repeat");if(i){var s=i.split("-"),c=parseInt(s[0]),u=parseInt(s[1]);u=u||1/0,n.push(j.f(c,u,w(e[o])))}else n.push(w(e[o]))}else console.log(e[o]);return n}var x=n(20);const R=C('\n<grammar root="quotes">\n  <rule id="quotes">\n    <one-of>\n      <item>to do is to be<tag>out="socrates";</tag></item>\n      <item>to be is to do<tag>out="sartre";</tag></item>\n      <item>do be do be do<tag>out="sinatra";</tag></item>\n    </one-of>\n  </rule>\n</grammar>\n'),k=Object(x.a)("do be do be do".split(/\s+/),R).resultsForRule(R.$root)[0];console.log(k);const P=Object(s.q)((t=>({type:"SPEAK",value:"Repainting to ".concat(t.recResult)})));function N(t){return Object(s.q)((e=>({type:"SPEAK",value:t})))}const T={initial:"init",states:{init:{initial:"prompt",on:{ENDSPEECH:"askColour"},states:{prompt:{entry:N("Let's change the colour!")}}},askColour:Object(r.a)({on:{RECOGNISED:[{target:"stop",cond:t=>"stop"===t.recResult},{target:"repaint"}]}},(D="Tell me the colour",{initial:"prompt",states:{prompt:{entry:N(D),on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")}}})),stop:{entry:N("Ok"),always:"init"},repaint:{initial:"prompt",states:{prompt:{entry:P,on:{ENDSPEECH:"repaint"}},repaint:{entry:"changeColour",type:"final"}}}}};var D;const I=C('\n<grammar root="command">\n    <rule id="command">\n        <ruleref uri="#polite"/>\n        <one-of>\n            <item><ruleref uri="#on_off"/><tag> out=rules.on_off; </tag></item>\n            <item><ruleref uri="#open_close"/><tag> out=rules.open_close; </tag></item>\n        </one-of>\n        <ruleref uri="#polite"/>\n    </rule> \n    <rule id="on_off">\n        <ruleref uri="#on_off_action"/>\n        <item repeat="0-1">the</item>\n        <ruleref uri="#on_off_object"/>\n        <tag>\n            out.action=rules.on_off_action;\n            out.object=rules.on_off_object;\n        </tag>\n    </rule> \n    <rule id="open_close">\n        <ruleref uri="#open_close_action"/>\n        <item repeat="0-1">the</item>\n        <ruleref uri="#open_close_object"/>\n        <tag>\n            out.action=rules.open_close_action;\n            out.object=rules.open_close_object;\n        </tag>\n    </rule> \n    <rule id="on_off_action">\n        <one-of>\n            <item> turn off <tag> out = \'off\'; </tag> </item>\n            <item> turn on <tag> out = \'on\'; </tag> </item>\n        </one-of>\n    </rule> \n    <rule id="on_off_object">\n        <one-of>\n            <item> light </item>\n            <item> lights <tag> out = \'light\'; </tag></item>\n            <item> heat </item>\n            <item> AC <tag> out = \'air conditioning\'; </tag></item>\n            <item> air-conditioning </item>\n        </one-of>\n    </rule>\n    <rule id="open_close_action">\n        <one-of>\n            <item> open </item>\n            <item> close </item>\n        </one-of>\n    </rule> \n    <rule id="open_close_object">\n        <one-of>\n            <item> window </item>\n            <item> door </item>\n        </one-of>\n    </rule>\n    <rule id="polite">\n        <item repeat="0-1">\n            <one-of>\n                <item> could you </item>\n                <item> would you </item>\n            </one-of>\n        </item>\n        <item repeat="0-1">\n            <one-of>\n                <item> please </item>\n                <item> kindly </item>\n            </one-of>\n        </item>\n    </rule> \n</grammar>\n'),L=Object(s.q)((t=>({type:"SPEAK",value:M(t.recResult)})));function q(t){return Object(s.q)((e=>({type:"SPEAK",value:t})))}function M(t){const e=Object(x.a)(t.split(/\s+/),I).resultsForRule(I.$root)[0];return console.log(e),void 0===e?"Sorry, I couldn't understand that.":"OK! "+e.object+". "+e.action+"."}const W={initial:"init",states:{init:{initial:"prompt",on:{ENDSPEECH:"askAction"},states:{prompt:{entry:q("Welcome to smart home!")}}},askAction:Object(r.a)({on:{RECOGNISED:[{target:"doAction"}]}},function(t){return{initial:"prompt",states:{prompt:{entry:q(t),on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")}}}}("What do you want me to do?")),doAction:{entry:L,type:"final"}}};function H(t){return Object(s.q)((e=>({type:"SPEAK",value:t})))}const K={initial:"init",states:{init:{on:{CLICK:"welcome"}},welcome:{on:{RECOGNISED:{actions:Object(s.q)((t=>({type:"QUERY",value:t.recResult}))),target:"wait"}},initial:"prompt",states:{prompt:{entry:H("Hi! What do you want me to do?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(s.q)("LISTEN")}}},wait:{on:{RESPONSE:[{cond:(t,e)=>"appointment"===e.value,target:"dmAppointment"},{cond:(t,e)=>"todo_item"===e.value,target:"dmTodo"},{cond:(t,e)=>"timer"===e.value,target:"dmTimer"},{cond:(t,e)=>"change_colour"===e.value,target:"dmColourChanger"},{cond:(t,e)=>"smart_home"===e.value,target:"dmSmartHome"},{target:"nomatch"}],RESPONSE_ERROR:{target:"error"}}},error:{entry:H("Oh no, an error!"),on:{ENDSPEECH:"init"}},nomatch:{entry:H("Sorry, I don't know how to do this."),on:{ENDSPEECH:"init"}},dmAppointment:Object(r.a)(Object(r.a)({},A),{},{onDone:{target:"init"}}),dmTodo:{entry:H("Let's create a to-do item!"),on:{ENDSPEECH:"init"}},dmTimer:{entry:H("Let's set a timer!"),on:{ENDSPEECH:"init"}},dmColourChanger:Object(r.a)(Object(r.a)({},T),{},{onDone:{target:"init"}}),dmSmartHome:Object(r.a)(Object(r.a)({},W),{},{onDone:{target:"init"}})}},G={initial:"init",states:{init:{on:{QUERY:{actions:Object(s.b)(((t,e)=>({query:e.value}))),target:"query"}}},query:{invoke:{src:(t,e)=>{return n=t.query,fetch(new Request("https://cors-anywhere.herokuapp.com/https://si-jon-nlu-app.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://maraev.me"},body:'{"text": "'.concat(n,'"}')})).then((t=>t.json()));var n},onDone:{target:"init",actions:[Object(s.q)(((t,e)=>({type:"RESPONSE",value:e.data.intent.name}))),(t,e)=>console.log(e.data)]},onError:{target:"init",actions:[Object(s.q)(((t,e)=>({type:"RESPONSE_ERROR",value:e.data}))),(t,e)=>console.log(e.data)]}}}}};var B=n(24),U=n(14);Object(u.a)({url:"https://statecharts.io/inspect",iframe:!1});const F=Object(i.a)({id:"root",type:"parallel",states:{dmMain:Object(r.a)({},K),dmRasaQuery:Object(r.a)({},G),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(s.b)(((t,e)=>(console.log("I was triggered during LISTEN"),{ttsAgenda:e.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(s.b)(((t,e)=>({recResult:e.value})))],target:".match"},RECOGNISED:"idle",STOP_LISTEN:"idle"},states:{progress:{},match:{entry:Object(s.q)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:t=>{console.log("<< ASR: "+t.recResult)},test:()=>{console.log("test")},logIntent:t=>{console.log("<< NLU intent: "+t.nluData.intent.name)}}}),$=t=>{switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(U.jsx)("button",Object(r.a)(Object(r.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"Listening..."}));case t.state.matches({asrtts:"speaking"}):return Object(U.jsx)("button",Object(r.a)(Object(r.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t),{},{children:"Speaking..."}));case t.state.matches({dmRasaQuery:"query"}):return console.log("Waiting for rasa result"),Object(U.jsx)("button",Object(r.a)(Object(r.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 60s linear"}},t),{},{children:"Waiting..."}));default:return Object(U.jsx)("button",Object(r.a)(Object(r.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Click to start"}))}};function J(){const t=Object(B.useSpeechSynthesis)({onEnd:()=>{p("ENDSPEECH")}}),e=t.speak,n=t.cancel,r=(t.speaking,Object(B.useSpeechRecognition)({onResult:t=>{p({type:"ASRRESULT",value:t})}})),a=r.listen,i=(r.listening,r.stop),s=Object(c.b)(F,{devTools:!0,actions:{recStart:Object(c.a)((()=>{console.log("Listening."),a({interimResults:!1,continuous:!0})})),recStop:Object(c.a)((()=>{console.log("Recognition stopped."),i()})),changeColour:Object(c.a)((t=>{console.log("Repainting..."),document.body.style.background=t.recResult})),ttsStart:Object(c.a)(((t,n)=>{console.log("Speaking..."),e({text:t.ttsAgenda})})),ttsCancel:Object(c.a)(((t,e)=>{console.log("TTS STOP..."),n()}))}}),u=Object(o.a)(s,3),l=u[0],p=u[1];u[2];return Object(U.jsx)("div",{className:"App",children:Object(U.jsx)($,{state:l,onClick:()=>p("CLICK")})})}const Q=document.getElementById("root");a.render(Object(U.jsx)(J,{}),Q)}},[[42,1,2]]]);
//# sourceMappingURL=main.426db7d7.chunk.js.map